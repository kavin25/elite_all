(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{23:function(e,t,a){e.exports=a(35)},29:function(e,t,a){},35:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),l=a.n(c),s=a(1),o=a.n(s),u=a(2),i=a(9),m=a(11),p=a(22),d=a(21),f="DWEET_USER_TOKEN",v=function(){return!!localStorage.getItem(f)},w=function(){function e(){Object(i.a)(this,e)}return Object(m.a)(e,[{key:"post",value:function(){var e=Object(u.a)(o.a.mark((function e(t,a,n){var r,c,l,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(a),c={"Content-Type":"application/json",Authorization:"".concat(localStorage.getItem(f))},n||(c={"Content-Type":"application/json"}),console.log(c),l={method:"POST",headers:c,body:JSON.stringify(a)},e.prev=5,e.next=8,fetch(t,l);case 8:return s=e.sent,e.next=11,s.json();case 11:r=e.sent,e.next=18;break;case 14:throw e.prev=14,e.t0=e.catch(5),console.log(e.t0),e.t0;case 18:return e.abrupt("return",r);case 19:case"end":return e.stop()}}),e,null,[[5,14]])})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var a,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"GET",headers:{"Content-Type":"application/json"}},e.prev=2,e.next=5,fetch(t,n);case 5:return r=e.sent,e.next=8,r.json();case 8:a=e.sent,e.next=15;break;case 11:throw e.prev=11,e.t0=e.catch(2),console.log(e.t0),e.t0;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(u.a)(o.a.mark((function e(t,a){var n,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("URL: ".concat(t,"; BODY: ").concat(JSON.stringify(a))),r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)},e.prev=3,e.next=6,fetch(t,r);case 6:return c=e.sent,e.next=9,c.json();case 9:n=e.sent,e.next=16;break;case 12:throw e.prev=12,e.t0=e.catch(3),console.log(e.t0),e.t0;case 16:return e.abrupt("return",n);case 17:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var a,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"DELETE",headers:{"Content-Type":"application/json"}},e.prev=2,e.next=5,fetch(t,n);case 5:return r=e.sent,e.next=8,r.json();case 8:a=e.sent,e.next=15;break;case 11:throw e.prev=11,e.t0=e.catch(2),console.log(e.t0),e.t0;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),E="http://localhost:5000/",b=function e(){Object(i.a)(this,e),this.loginApi="".concat(E,"api/user/login"),this.registerApi="".concat(E,"api/user/register"),this.dweetsList="".concat(E,"dweet/s"),this.specificDweet=function(e){return"".concat(E,"dweet/").concat(e)},this.updateSpecificDweet=function(e){return"".concat(E,"dweet/").concat(e,"/update")},this.createDweet="".concat(E,"dweet/create")},h=new w,g=new b,y=function(){function e(){Object(i.a)(this,e)}return Object(m.a)(e,[{key:"dweetsList",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,e.prev=1,e.next=4,h.get(g.dweetsList);case 4:t=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:return e.abrupt("return",t);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"dweetSpecific",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null,e.prev=1,e.next=4,h.get(g.specificDweet(t));case 4:a=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteDweet",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null,e.prev=1,e.next=4,h.delete(g.specificDweet(t));case 4:a=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"updateDweet",value:function(){var e=Object(u.a)(o.a.mark((function e(t,a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,h.update(g.updateSpecificDweet(t),a);case 4:n=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:return e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"createDweet",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null,e.prev=1,e.next=4,h.post(g.createDweet,t,!0);case 4:if("Created dweet"!=(a=e.sent).message){e.next=9;break}console.log(a),e.next=11;break;case 9:return alert(a.message),e.abrupt("return",!1);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.log(e.t0);case 16:return e.abrupt("return",a);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),x=a(10),k=a(3),N=(a(29),a(5));function j(e){var t=e.dweet,a="/update-dweet/".concat(t._id);return r.a.createElement("div",null,r.a.createElement("input",{type:"text",value:t._id,id:"copyValue",style:{display:"none"}}),r.a.createElement("input",{type:"submit",value:"Copy ID",onClick:function(){var e=document.getElementById("copyValue");e.select(),document.execCommand("copy"),alert("Copy this --\x3e "+e.value)}}),r.a.createElement(x.b,{to:a},r.a.createElement("div",{className:"card",key:t._id},r.a.createElement("p",null,"Id: ",t._id),r.a.createElement("p",null,t.dweet),r.a.createElement("p",null,function(e){var t=new Date(e);return t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate()+", "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()}(t.last_updated_at)),r.a.createElement("p",null,t.posted_by))))}var O=new y;function D(e){var t=Object(n.useState)([]),a=Object(N.a)(t,2),c=a[0],l=a[1],s=Object(n.useState)(!1),i=Object(N.a)(s,2);i[0],i[1];function m(){return(m=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.dweetsList();case 2:return t=e.sent,console.log(t),t&&(l(t),document.getElementById("downArrow").addEventListener("click",(function(e){e.preventDefault(),document.querySelector("#"+e.target.parentNode.href.split("#")[1]).scrollIntoView({behavior:"smooth"})}))),e.abrupt("return");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){!function(){m.apply(this,arguments)}(),console.log("effect")}),[]),r.a.createElement("div",null,r.a.createElement("div",{className:"bg"},r.a.createElement("div",{className:"welcomeCard"},r.a.createElement("h2",null,"What is a dweet?"),r.a.createElement("p",null,"A dweet is a 140 character string which can ",r.a.createElement("br",null),"contain any alphanumeric characters. We have a lot of",r.a.createElement("br",null)," dweets at our site"),r.a.createElement("a",{href:"#allDweets",id:"downArrow"},r.a.createElement("i",{className:"fa fa-arrow-down"})))),r.a.createElement("div",{id:"allDweets",className:"allDweets"},c.length>0&&r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("h3",null," All Dweets "),c.map((function(e){return r.a.createElement(j,{dweet:e})}))))))}var S=new y,I=function(){var e=Object(n.useState)(null),t=Object(N.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),s=Object(N.a)(l,2),i=s[0],m=s[1],p=function(){var e=Object(u.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m(!0),t=document.getElementById("dweetSearch").value,!/[^A-Za-z0-9]+/g.test(t)){e.next=7;break}alert("Not a valid ID"),m(!1),e.next=11;break;case 7:return e.next=9,S.dweetSpecific(t);case 9:(a=e.sent)&&(m(!1),console.log(a),c(a),document.querySelector("#allDweets").scrollIntoView({behavior:"smooth"}));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("div",{className:"bg"},r.a.createElement("div",{className:"welcomeCard"},r.a.createElement("h2",null,"Search for Dweet By Id"),r.a.createElement("div",{className:"form"},r.a.createElement("input",{type:"text",name:"id",id:"dweetSearch",autocomplete:"off",required:!0}),r.a.createElement("label",{for:"id",className:"label-name"},r.a.createElement("span",{className:"content-name"},"Dweet ID"))),i?r.a.createElement("input",{type:"submit",value:"Loading...",onClick:p}):r.a.createElement("input",{type:"submit",value:"Search",onClick:p}))),r.a.createElement("div",{id:"allDweets",className:"allDweets"},a&&r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("h3",null," Dweet "),null!=a.dweet?r.a.createElement(j,{dweet:a}):r.a.createElement("b",null,"No Dweet with this ID")))))},C=new y,L=function(){var e=Object(n.useState)(null),t=Object(N.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),s=Object(N.a)(l,2),i=s[0];s[1];Object(n.useEffect)((function(){v()||window.location.replace("/login")}));var m=function(){var e=Object(u.a)(o.a.mark((function e(){var t,a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(140==(t=document.getElementById("dweet").value).length){e.next=4;break}return alert("The dweet needs to be 140 characters long"),e.abrupt("return",!1);case 4:return a={dweet:t},e.next=7,C.createDweet(a);case 7:(n=e.sent)&&(c(n.dweet),document.querySelector("#allDweets").scrollIntoView({behavior:"smooth"}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("div",{className:"bg"},r.a.createElement("div",{className:"welcomeCard"},r.a.createElement("h2",null,"Create Dweet"),r.a.createElement("div",{className:"form"},r.a.createElement("input",{type:"text",name:"id",id:"dweet",autocomplete:"off",required:!0}),r.a.createElement("label",{for:"id",className:"label-name"},r.a.createElement("span",{className:"content-name"},"Dweet"))),i?r.a.createElement("input",{type:"submit",value:"Loading...",disabled:!0}):r.a.createElement("input",{type:"submit",value:"Create",onClick:m}))),r.a.createElement("div",{id:"allDweets",className:"allDweets"},a&&r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("h3",null," Dweet "),null!=a.dweet?r.a.createElement(j,{dweet:a}):r.a.createElement("b",null,"No Dweet with this ID")))))},_=new w,B=new b,T=function(){function e(){Object(i.a)(this,e)}return Object(m.a)(e,[{key:"login",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null,e.prev=1,e.next=4,_.post(B.loginApi,t,!1);case 4:if("Logged In"!=(a=e.sent).message){e.next=9;break}console.log(a),e.next=11;break;case 9:return alert(a.message),e.abrupt("return",!1);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),alert(e.t0);case 16:return e.abrupt("return",a);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"register",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null,e.prev=1,e.next=4,_.post(B.registerApi,t,!1);case 4:a=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),A=new T,q=function(){var e=Object(n.useState)(!1),t=Object(N.a)(e,2),a=t[0];t[1];Object(n.useEffect)((function(){v()&&(alert("You've already logged in"),window.location.replace("/"))}),[]);var c=function(){var e=Object(u.a)(o.a.mark((function e(){var t,a,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Function"),t=document.getElementById("username").value,a=document.getElementById("password").value,n={username:t,password:a},e.next=6,A.login(n);case 6:(r=e.sent)&&(console.log(r.token),c=r.token,localStorage.setItem(f,c),localStorage.setItem("DWEET_USERNAME",t),window.location.replace("/"));case 8:case"end":return e.stop()}var c}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("div",{className:"bg"},r.a.createElement("div",{className:"welcomeCard",style:{height:300}},r.a.createElement("h2",null,"Login"),r.a.createElement("div",{className:"form"},r.a.createElement("input",{type:"text",name:"id",id:"username",autocomplete:"off",required:!0}),r.a.createElement("label",{for:"id",className:"label-name"},r.a.createElement("span",{className:"content-name"},"Username"))),r.a.createElement("div",{className:"form"},r.a.createElement("input",{type:"password",name:"id",id:"password",autocomplete:"off",required:!0}),r.a.createElement("label",{for:"id",className:"label-name"},r.a.createElement("span",{className:"content-name"},"Password"))),a?r.a.createElement("input",{type:"submit",value:"Loading...",disabled:!0}):r.a.createElement("input",{type:"submit",value:"Submit",onClick:c}))))},U=new T,M=function(){var e=Object(n.useState)(!1),t=Object(N.a)(e,2),a=t[0],c=(t[1],function(){var e=Object(u.a)(o.a.mark((function e(){var t,a,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Function"),t=document.getElementById("name").value,a=document.getElementById("username").value,n=document.getElementById("password").value,r={name:t,username:a,password:n},e.next=7,U.register(r);case 7:e.sent&&window.location.replace("/login");case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());return r.a.createElement("div",null,r.a.createElement("div",{className:"bg"},r.a.createElement("div",{className:"welcomeCard",style:{height:"auto"}},r.a.createElement("h2",null,"Register"),r.a.createElement("div",{className:"form"},r.a.createElement("input",{type:"text",name:"id",id:"name",autocomplete:"off",required:!0}),r.a.createElement("label",{for:"id",className:"label-name"},r.a.createElement("span",{className:"content-name"},"Name"))),r.a.createElement("div",{className:"form"},r.a.createElement("input",{type:"text",name:"id",id:"username",autocomplete:"off",required:!0}),r.a.createElement("label",{for:"id",className:"label-name"},r.a.createElement("span",{className:"content-name"},"Username"))),r.a.createElement("div",{className:"form"},r.a.createElement("input",{type:"password",name:"id",id:"password",autocomplete:"off",required:!0}),r.a.createElement("label",{for:"id",className:"label-name"},r.a.createElement("span",{className:"content-name"},"Password"))),a?r.a.createElement("input",{type:"submit",value:"Loading...",disabled:!0}):r.a.createElement("input",{type:"submit",value:"Submit",onClick:c}))))},R=new y,W=function(e){var t=Object(n.useState)(null),a=Object(N.a)(t,2),c=a[0],l=a[1],s=Object(n.useState)(!1),i=Object(N.a)(s,2),m=i[0],p=i[1],d=Object(n.useState)(!1),f=Object(N.a)(d,2),v=f[0],w=f[1];Object(n.useEffect)((function(){function t(){return(t=Object(u.a)(o.a.mark((function t(){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return w(!0),t.next=3,R.dweetSpecific(e.match.params.id);case 3:(a=t.sent)&&(console.log(localStorage.getItem("DWEET_USERNAME")),w(!1),console.log(a),l(a),localStorage.getItem("DWEET_USERNAME")===a.posted_by?p(!0):p(!1));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]);var E=function(){var t=Object(u.a)(o.a.mark((function t(){var a,n,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(140===(a=document.getElementById("dweet").value).length){t.next=5;break}alert("Dweet should be 140 characters long"),t.next=20;break;case 5:if(a!==c.dweet){t.next=10;break}return alert("Kuch change toh karo update karne ke liye\n(Please change something to update)"),t.abrupt("return",!1);case 10:return n={dweet:a},w(!0),t.next=14,R.updateDweet(e.match.params.id,n);case 14:if(!t.sent){t.next=20;break}return t.next=18,R.dweetSpecific(e.match.params.id);case 18:(r=t.sent)&&(w(!1),console.log(r),l(r));case 20:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),b=function(){var t=Object(u.a)(o.a.mark((function t(){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R.deleteDweet(e.match.params.id);case 2:(a=t.sent)&&(1===a.deletedCount?window.location.replace("/"):alert("somesthing went wrong"));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("div",{className:"bg"},r.a.createElement("div",{className:"welcomeCard",style:{width:"auto",minWidth:680,height:"auto",minHeight:280}},r.a.createElement("h2",null,"Update Dweet"),c&&r.a.createElement("div",null,r.a.createElement("h3",null,"Dweet:"),r.a.createElement("p",null,c.dweet),r.a.createElement("h3",null,"Posted By:"),r.a.createElement("p",null,c.posted_by),r.a.createElement("h3",null,"Lasted Updated on:"),r.a.createElement("p",null,function(e){var t=new Date(e);return t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate()+", "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()}(c.last_updated_at))),!!m&&r.a.createElement("div",{className:"form"}," ",r.a.createElement("input",{type:"text",name:"",id:"dweet",autocomplete:"off",defaultValue:c.dweet,required:!0})," ",r.a.createElement("label",{for:"id",className:"label-name"}," ",r.a.createElement("span",{className:"content-name"},"Dweet")," ")," "),!!m&&(v?r.a.createElement("input",{type:"submit",value:"Loading...",disabled:!0}):r.a.createElement("div",null,r.a.createElement("input",{type:"submit",value:"Update",onClick:E}),r.a.createElement("input",{type:"submit",value:"Delete",onClick:b}))))))},P=(new y,function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).componentDidMount=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Component has mounted"),document.getElementById("logoutNav").addEventListener("click",(function(){v()?(localStorage.removeItem(f),localStorage.removeItem("DWEET_USERNAME"),window.location.replace("/")):alert("You haven't Logged in yet")}));case 2:case"end":return e.stop()}}),e)}))),n.state={dweetsData:[]},n}return Object(m.a)(a,[{key:"render",value:function(){var e=this.state.dweetsData;return r.a.createElement("div",null,r.a.createElement(x.a,null,r.a.createElement("div",{className:"navbar"},r.a.createElement("div",{className:"navbar-title"},"Dweeter"),r.a.createElement(x.b,{to:"/"},r.a.createElement("div",{className:"navbar-item"},"Home")),r.a.createElement(x.b,{to:"/specific-dweet/"},r.a.createElement("div",{className:"navbar-item"},"Dweet By Id")),r.a.createElement(x.b,{to:"/create-dweet/"},r.a.createElement("div",{className:"navbar-item"},"Create Dweet")),r.a.createElement(x.b,{to:"/login/"},r.a.createElement("div",{className:"navbar-item"},"Login")),r.a.createElement(x.b,{to:"/register/"},r.a.createElement("div",{className:"navbar-item"},"Register")),r.a.createElement("div",{className:"navbar-item",id:"logoutNav"},"Logout")),r.a.createElement(k.c,null,r.a.createElement(k.a,{path:"/specific-dweet/",component:function(){return r.a.createElement(I,null)},exact:!0}),r.a.createElement(k.a,{path:"/create-dweet/",component:function(){return r.a.createElement(L,null)},exact:!0}),r.a.createElement(k.a,{path:"/login",component:function(){return r.a.createElement(q,null)},exact:!0}),r.a.createElement(k.a,{path:"/register",component:function(){return r.a.createElement(M,null)},exact:!0}),r.a.createElement(k.a,{path:"/update-dweet/:id",component:function(e){return r.a.createElement(W,e)},exact:!0}),r.a.createElement(k.a,{path:"/",component:function(){return r.a.createElement(D,{dweetsData:e})}}))))}}]),a}(r.a.Component));l.a.render(r.a.createElement(P,null),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.3e6485c9.chunk.js.map